<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>_Extensions/essayLimitByCharacter - Learnosity Toolkit - Docs</title>
    
    <meta name="description" content="Documentation for the Learnosity Toolkit JavaScript library." />
    
        <meta name="keywords" content="Learnosity" />
        <meta name="keyword" content="Learnosity" />
    
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/custom.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" autofocus autocomplete="on" />
    
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/michaelsharman/LT" target="_blank" class="" id="" >Github</a></h2><h3>Modules</h3><ul><li><a href="module-Activity.html">Activity</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Activity.html#.activity">activity</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.activityId">activityId</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.activitySubTitle">activitySubTitle</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.activityTemplateId">activityTemplateId</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.activityTitle">activityTitle</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.adaptiveType">adaptiveType</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.annotationsConfig">annotationsConfig</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.autoSaveConfig">autoSaveConfig</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.hasActivityTemplate">hasActivityTemplate</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.hasAnnotations">hasAnnotations</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.hasAutoSave">hasAutoSave</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.hasEvents">hasEvents</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.hasItemPool">hasItemPool</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.hasResourceItems">hasResourceItems</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.hasSections">hasSections</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.hasShuffledItems">hasShuffledItems</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.hasTryAgain">hasTryAgain</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.isAdaptive">isAdaptive</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.isResuming">isResuming</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.itemBank">itemBank</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.itemPool">itemPool</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.region">region</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.resourceItems">resourceItems</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.sessionId">sessionId</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.state">state</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.totalItems">totalItems</a></li><li data-type='method' style='display: none;'><a href="module-Activity.html#.userId">userId</a></li></ul></li><li><a href="module-App.html">App</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-App.html#.annotationsApp">annotationsApp</a></li><li data-type='method' style='display: none;'><a href="module-App.html#.appInstance">appInstance</a></li><li data-type='method' style='display: none;'><a href="module-App.html#.assessApp">assessApp</a></li><li data-type='method' style='display: none;'><a href="module-App.html#.eventsApp">eventsApp</a></li><li data-type='method' style='display: none;'><a href="module-App.html#.init">init</a></li><li data-type='method' style='display: none;'><a href="module-App.html#.questionsApp">questionsApp</a></li></ul></li><li><a href="module-Diagnostics.html">Diagnostics</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Diagnostics.html#.diagnostics">diagnostics</a></li><li data-type='method' style='display: none;'><a href="module-Diagnostics.html#.filterEvent">filterEvent</a></li><li data-type='method' style='display: none;'><a href="module-Diagnostics.html#.listen">listen</a></li></ul></li><li><a href="module-Items.html">Items</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Items.html#.dynamic">dynamic</a></li><li data-type='method' style='display: none;'><a href="module-Items.html#.flag">flag</a></li><li data-type='method' style='display: none;'><a href="module-Items.html#.isDynamicItem">isDynamicItem</a></li><li data-type='method' style='display: none;'><a href="module-Items.html#.isFirstItem">isFirstItem</a></li><li data-type='method' style='display: none;'><a href="module-Items.html#.isFlagged">isFlagged</a></li><li data-type='method' style='display: none;'><a href="module-Items.html#.isItemFullyAttempted">isItemFullyAttempted</a></li><li data-type='method' style='display: none;'><a href="module-Items.html#.isLastItem">isLastItem</a></li><li data-type='method' style='display: none;'><a href="module-Items.html#.isMaskingEnabled">isMaskingEnabled</a></li><li data-type='method' style='display: none;'><a href="module-Items.html#.item">item</a></li><li data-type='method' style='display: none;'><a href="module-Items.html#.itemAttemptStatus">itemAttemptStatus</a></li><li data-type='method' style='display: none;'><a href="module-Items.html#.itemByResponseId">itemByResponseId</a></li><li data-type='method' style='display: none;'><a href="module-Items.html#.itemElement">itemElement</a></li><li data-type='method' style='display: none;'><a href="module-Items.html#.itemPosition">itemPosition</a></li><li data-type='method' style='display: none;'><a href="module-Items.html#.itemReference">itemReference</a></li></ul></li><li><a href="module-Logger.html">Logger</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Logger.html#.error">error</a></li><li data-type='method' style='display: none;'><a href="module-Logger.html#.info">info</a></li><li data-type='method' style='display: none;'><a href="module-Logger.html#.log">log</a></li><li data-type='method' style='display: none;'><a href="module-Logger.html#.warn">warn</a></li></ul></li><li><a href="module-Player.html">Player</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Player.html#.dialog">dialog</a></li><li data-type='method' style='display: none;'><a href="module-Player.html#.hideDialog">hideDialog</a></li><li data-type='method' style='display: none;'><a href="module-Player.html#.isResponsiveMode">isResponsiveMode</a></li><li data-type='method' style='display: none;'><a href="module-Player.html#.isReviewScreen">isReviewScreen</a></li><li data-type='method' style='display: none;'><a href="module-Player.html#.navigate">navigate</a></li><li data-type='method' style='display: none;'><a href="module-Player.html#.next">next</a></li><li data-type='method' style='display: none;'><a href="module-Player.html#.previous">previous</a></li><li data-type='method' style='display: none;'><a href="module-Player.html#.review">review</a></li><li data-type='method' style='display: none;'><a href="module-Player.html#.submit">submit</a></li></ul></li><li><a href="module-Questions.html">Questions</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Questions.html#.question">question</a></li><li data-type='method' style='display: none;'><a href="module-Questions.html#.questionInstance">questionInstance</a></li><li data-type='method' style='display: none;'><a href="module-Questions.html#.questionResponse">questionResponse</a></li><li data-type='method' style='display: none;'><a href="module-Questions.html#.questionResponseIds">questionResponseIds</a></li><li data-type='method' style='display: none;'><a href="module-Questions.html#.questionScore">questionScore</a></li><li data-type='method' style='display: none;'><a href="module-Questions.html#.questions">questions</a></li></ul></li><li><a href="module-Sections.html">Sections</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Sections.html#.isFirstItemInSection">isFirstItemInSection</a></li><li data-type='method' style='display: none;'><a href="module-Sections.html#.isLastItemInSection">isLastItemInSection</a></li><li data-type='method' style='display: none;'><a href="module-Sections.html#.section">section</a></li><li data-type='method' style='display: none;'><a href="module-Sections.html#.sectionHasShuffledItems">sectionHasShuffledItems</a></li><li data-type='method' style='display: none;'><a href="module-Sections.html#.sectionIndex">sectionIndex</a></li><li data-type='method' style='display: none;'><a href="module-Sections.html#.sectionItemPosition">sectionItemPosition</a></li><li data-type='method' style='display: none;'><a href="module-Sections.html#.sections">sections</a></li><li data-type='method' style='display: none;'><a href="module-Sections.html#.totalItemsInSection">totalItemsInSection</a></li></ul></li><li><a href="module-_Extensions_ariaCountOnNav.html">_Extensions/ariaCountOnNav</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-_Extensions_ariaCountOnNav.html#.run">run</a></li></ul></li><li><a href="module-_Extensions_blockGrammarChecks.html">_Extensions/blockGrammarChecks</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-_Extensions_blockGrammarChecks.html#.run">run</a></li></ul></li><li><a href="module-_Extensions_columnResizer.html">_Extensions/columnResizer</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-_Extensions_columnResizer.html#.run">run</a></li></ul></li><li><a href="module-_Extensions_essayLimitByCharacter.html">_Extensions/essayLimitByCharacter</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-_Extensions_essayLimitByCharacter.html#.run">run</a></li></ul></li><li><a href="module-_Extensions_hideAlternatives.html">_Extensions/hideAlternatives</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-_Extensions_hideAlternatives.html#.run">run</a></li></ul></li><li><a href="module-_Extensions_keyboardShortcuts.html">_Extensions/keyboardShortcuts</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-_Extensions_keyboardShortcuts.html#.run">run</a></li></ul></li><li><a href="module-_Extensions_magnifier.html">_Extensions/magnifier</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-_Extensions_magnifier.html#.run">run</a></li></ul></li><li><a href="module-_Extensions_mcqLabelPrefix.html">_Extensions/mcqLabelPrefix</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-_Extensions_mcqLabelPrefix.html#.run">run</a></li></ul></li><li><a href="module-_Extensions_pageOverlay.html">_Extensions/pageOverlay</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-_Extensions_pageOverlay.html#.halt">halt</a></li><li data-type='method' style='display: none;'><a href="module-_Extensions_pageOverlay.html#.run">run</a></li></ul></li><li><a href="module-_Extensions_resetResponse.html">_Extensions/resetResponse</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-_Extensions_resetResponse.html#.run">run</a></li></ul></li></ul>
    
</nav>

<div id="main" role="main">
    
    <h1 class="page-title">_Extensions/essayLimitByCharacter</h1>
    

    




<section>

<header>
    
</header>

<article>
    
        <div class="container-overview">
        
            


<p>Extensions add specific functionality to Items API.
They rely on modules within LT being available.</p>
<p>--</p>
<p>This script changes the essay validation check on
string length to be character based, instead of
the default word based.</p>
<p>It ignores spaces by default, so they are not
treated as characters to validate length.</p>
<p>Works with <code>longtextV2</code> and <code>plaintext</code> question types.</p>

<dl class="details">
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>




            

            
        
        </div>
    

    

    

    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id=".run">run<span class="signature">(includeSpaces)</span><span class="type-signature"></span></h4>

    





<p>Looks for relevent question types and overrides validation
to be on character length. Uses the <code>max_length</code> (Word limit)
that was set up in authoring, treating the value as a character
length instead of word length.</p>
<p><strong>Known limitations</strong></p>
<p>If the assessment player is in responsive mode (&lt; 800px) and
you <em>don't</em> have the review screen enabled (which it is by default)
then we can't inject a custom button. This means we render the
default Finish button, and no prevent submission will occur.
The solution is to use any of the valid regions (<code>main</code>,
<code>horizontal</code>, or <code>horizontal-fixed</code>) and don't decouple the
submit button from the review button in Items API configuration.</p>
<p>Essentially, if you're using default options, you'll be fine.</p>
<p>If submitting via the JavaScript <code>submit()</code> method, this will
skip the validation check.</p>
<p><strong>Preventing submission</strong></p>
<p>By default, questions are authored to prevent the user from
submitting their session in the event of word limit violations.
The same behaviour is inherited in this extension. If you don't
want to prevent submission, you can check the <code>Submit over limit</code>
option in the question authoring area.</p>
<p>To prevent submission, we need to add a custom button to Items
API becuase we can't easily inject a validation check when the
default submit button is clicked, so we need to replace it with
a custom one.</p>
<p>Adding a custom button is a capability in Items API. Below is a code
snippet of an Items API configuration object. Note the custom button
is added in <code>region_overrides</code>.</p>
<p>You MUST use the <code>icon_class</code> and <code>name</code> as defined in the custom
button <code>options</code> object below.</p>
<p><strong><code>main</code> region</strong></p>
<pre class="prettyprint source"><code>{
    &quot;config&quot;: {
        &quot;regions&quot;: &quot;main&quot;,
        &quot;region_overrides&quot;: {
            &quot;bottom-right&quot;: [
                {
                    &quot;type&quot;: &quot;custom_button&quot;,
                    &quot;options&quot;: {
                        &quot;name&quot;: &quot;btn-essay-character-limit-submit&quot;,
                        &quot;label&quot;: &quot;Finish&quot;,
                        &quot;icon_class&quot;: &quot;item-next hidden&quot;
                    },
                    &quot;position&quot;: &quot;right&quot;
                },
                {
                    &quot;type&quot;: &quot;next_button&quot;,
                    &quot;position&quot;: &quot;right&quot;
                },
                {
                    &quot;type&quot;: &quot;previous_button&quot;,
                    &quot;position&quot;: &quot;right&quot;
                }
            ]
        }
    }
}
</code></pre>
<p><strong><code>horizontal</code> or <code>horizontal-fixed</code> regions</strong></p>
<pre class="prettyprint source"><code>{
    &quot;config&quot;: {
        &quot;regions&quot;: &quot;horizontal&quot;,
        &quot;region_overrides&quot;: {
            &quot;bottom&quot;: [
                {
                    &quot;type&quot;: &quot;custom_button&quot;,
                    &quot;options&quot;: {
                        &quot;name&quot;: &quot;btn-essay-character-limit-submit&quot;,
                        &quot;label&quot;: &quot;Finish&quot;,
                        &quot;icon_class&quot;: &quot;item-next hidden&quot;
                    },
                    &quot;position&quot;: &quot;right&quot;
                },
                {
                    &quot;type&quot;: &quot;next_button&quot;,
                    &quot;position&quot;: &quot;right&quot;
                },
                {
                    &quot;type&quot;: &quot;horizontaltoc_element&quot;,
                    &quot;position&quot;: &quot;right&quot;
                },
                {
                    &quot;type&quot;: &quot;previous_button&quot;,
                    &quot;position&quot;: &quot;right&quot;
                }
            ]
        }
    }
}
</code></pre>
<p><strong>Changing labels</strong></p>
<p>This extension will automatically change <code>Word Limit</code> to <code>Character Limit</code> in the
footer of the essay question types. However, for full coverage in review mode, or
in authoring and reporting, you should use label bundles. Eg:</p>
<p><strong>Assessment label bundle</strong></p>
<p>Use this in Items and Reports APIs.</p>
<p>Caveat: this will update Math Essay and Chemistry Essay footers as well.</p>
<pre class="prettyprint source"><code>{
    &quot;config&quot;: {
        &quot;questions_api_init_options&quot;: {
            &quot;labelBundle&quot;: {
                &quot;wordLength&quot;: &quot;Character Limit&quot;
            }
        }
    }
}
</code></pre>
<p><strong>Authoring label bundle</strong></p>
<p>Use this in Author API.</p>
<pre class="prettyprint source"><code>{
    &quot;config&quot;: {
        &quot;dependencies&quot;: {
            &quot;question_editor_api&quot;: {
                &quot;init_options&quot;: {
                    &quot;label_bundle&quot;: {
                        &quot;help.longtextV2.name:max_length&quot;: &quot;Character limit&quot;,
                        &quot;help.longtextV2.name:show_word_limit&quot;: &quot;Character limit&quot;,
                        &quot;help.longtextV2.description:max_length&quot;: &quot;Maximum number of characters that can be entered in the text entry area (max 10,000 characters).&quot;,
                        &quot;help.longtextV2.description:show_word_limit&quot;: &quot;Defines whether the character limit should be displayed in the toolbar or not. The options are: &lt;ul>&lt;li>&lt;strong>Always On&lt;/strong> - Character Limit is always displayed.&lt;/li>&lt;li>&lt;strong>On Limit&lt;/strong> - Character Limit will only be displayed when the limit is reached.&lt;/li>&lt;li>&lt;strong>Off&lt;/strong> - Character Limit will not be displayed.&lt;/li>&lt;/ul>&quot;,
                        &quot;help.longtextV2.description:submit_over_limit&quot;: &quot;Determines if the user can save/submit text when the character limit has been exceeded.&quot;,
                        &quot;longtextV2:max_length&quot;: &quot;Character limit&quot;,
                        &quot;longtextV2:show_word_count&quot;: &quot;Show character count&quot;,
                        &quot;longtextV2:show_word_limit&quot;: &quot;Character limit&quot;,
                        &quot;help.plaintext.name:max_length&quot;: &quot;Character limit&quot;,
                        &quot;help.plaintext.name:show_word_limit&quot;: &quot;Character limit&quot;,
                        &quot;help.plaintext.description:max_length&quot;: &quot;Maximum number of characters that can be entered in the text entry area (max 10,000 characters).&quot;,
                        &quot;help.plaintext.description:show_word_limit&quot;: &quot;Defines whether the character limit should be displayed in the toolbar or not. The options are: &lt;ul>&lt;li>&lt;strong>Always On&lt;/strong> - Character Limit is always displayed.&lt;/li>&lt;li>&lt;strong>On Limit&lt;/strong> - Character Limit will only be displayed when the limit is reached.&lt;/li>&lt;li>&lt;strong>Off&lt;/strong> - Character Limit will not be displayed.&lt;/li>&lt;/ul>&quot;,
	                    &quot;plaintext:max_length&quot;: &quot;Character limit&quot;,
                        &quot;plaintext:show_word_limit&quot;: &quot;Character limit&quot;
                    }
                }
            },
            &quot;questions_api&quot;: {
                &quot;init_options&quot;: {
                    &quot;labelBundle&quot;: {
                        &quot;wordLength&quot;: &quot;Character Limit&quot;
                    }
                }
            }
        }
    }
}
</code></pre>

<dl class="details">
    

    

    

    
    <dt class="tag-since"><h5>Since</h5></dt>
    <dd class="tag-since">0.10.0</dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>











    <h5 class="h5-examples">Example</h5>
    
    <pre class="prettyprint"><code>import { LT } from '@caspingus/lt/src/index';

LT.init(itemsApp); // Set up LT with the Items API application instance variable
LT.extensions.essayLimitByCharacter.run();</code></pre>




    <h5 class="h5-parameters">Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>includeSpaces</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>



            
            </td>

            

            

            <td class="description last"><p>Whether to include spaces in the character count
Default is <code>false</code>.</p></td>
        </tr>

    
    </tbody>
</table>



















        
    

    

    
</article>

</section>





    
</div>

<br class="clear">



<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>